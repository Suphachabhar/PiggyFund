{"ast":null,"code":"var _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Tracker/Tracker.js\";\nimport React, { Component } from 'react';\nimport { Balance } from '../../components/Transaction/Balance';\nimport { Chart } from '../../components/Transaction/Chart';\nimport { IncomeExpenses } from '../../components/Transaction/IncomeExpenses';\nimport { TransactionList } from '../../components/Transaction/TransactionList';\nimport { GlobalProvider } from '../../context/GlobalState';\nimport cookie from 'react-cookies';\nimport './Tracker.css';\nimport { notification, Drawer, Form, Col, Row, DatePicker, AutoComplete, Input, Radio } from 'antd';\nconst Option = AutoComplete.Option;\n\nfunction onOk(value) {\n  console.log('onOk: ', value);\n}\n\nexport const loginUser = () => {\n  let id = parseInt(cookie.load('userInfo'));\n  return id;\n};\nexport default class Tracker extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      error: null,\n      isLoaded: false,\n      inputcategory: \"\",\n      datas: {\n        amount: \"\"\n      },\n      date: \"\",\n      categories: [],\n      in_out: \"\"\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.openNotificationWithIcon = type => {\n      notification[type]({\n        message: 'Add',\n        description: 'Add new transcation success.'\n      });\n    };\n\n    this.getCategory = async () => {\n      try {\n        let res = await fetch(`http://ballistic-circular-parent.glitch.me/getallcategory`);\n        let posts = await res.json();\n        this.setState({\n          categories: posts\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.addItems = _ => {\n      const {\n        datas,\n        date,\n        inputcategory,\n        in_out\n      } = this.state;\n      let userid = loginUser();\n\n      if (inputcategory.length === 0) {\n        notification['error']({\n          message: 'Add',\n          description: 'Please enter the category name.'\n        });\n      } else if (datas.amount.length === 0 || parseInt(datas.amount) === 0) {\n        notification['error']({\n          message: 'Add',\n          description: 'Please enter a valid number for amount (non-zero).'\n        });\n      } else {\n        var tot = parseFloat(datas.amount).toFixed(2);\n        let rates = cookie.load('rate');\n        let c = cookie.load('currency');\n        console.log(c, rates);\n        tot = tot / rates;\n\n        if (in_out === 2) {\n          tot = tot * -1;\n        }\n\n        var res = tot.toString();\n        fetch(`https://be-4920.herokuapp.com/spending?category=${inputcategory}&amount=${res}&time=${date}&userid=${userid}`).then(console.log('Add item success')).catch(error => this.setState({\n          isLoaded: true,\n          error: error\n        }));\n        this.openNotificationWithIcon('success');\n        this.onClose();\n      }\n    };\n\n    this.onChange = value => {\n      this.setState({\n        date: value.toISOString()\n      });\n    };\n\n    this.onSelect_inputauto = data => {\n      this.setState({\n        inputcategory: data\n      }); // console.log('onSelect', data);\n    };\n\n    this.onChange_inputauto = data => {\n      this.setState({\n        inputcategory: data\n      }); // console.log('onSelect', data);\n    };\n\n    this.changeType = data => {\n      // const value = data.target.value\n      this.setState({\n        in_out: data.target.value\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getCategory();\n  }\n\n  render() {\n    const {\n      datas,\n      categories\n    } = this.state; // const children = categories.map(c => <Option key={c}>{c}</Option>);\n    // const children = categories.map(c => <Option key={c}>{c}</Option>);\n\n    return /*#__PURE__*/React.createElement(GlobalProvider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Balance, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Chart, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(IncomeExpenses, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"back-btn\",\n      onClick: this.showDrawer,\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 11\n      }\n    }, \"Add Transcation\"), /*#__PURE__*/React.createElement(Drawer, {\n      title: \"Add a new transcation\",\n      width: 520,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      bodyStyle: {\n        paddingBottom: 80\n      },\n      footer: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"additem-btn\",\n        type: \"primary\",\n        onClick: this.onClose,\n        style: {\n          marginRight: 8\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"additem-btn\",\n        onClick: () => {\n          this.addItems();\n        },\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 17\n        }\n      }, \"Add Item\")),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      layout: \"vertical\",\n      hideRequiredMark: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"dateTime\",\n      label: \"Date\",\n      rules: [{\n        required: true,\n        message: 'Please choose the dateTime'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"date-input\",\n      size: \"large\",\n      style: {\n        width: '100%'\n      },\n      onChange: this.onChange,\n      onOk: onOk,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"category\",\n      label: \"Category\",\n      rules: [{\n        required: true,\n        message: 'Please enter the category'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(AutoComplete, {\n      dataSource: categories,\n      onChange: this.onChange_inputauto,\n      onSearch: this.onSelect_inputauto,\n      children: /*#__PURE__*/React.createElement(Input, {\n        placeholder: \"Enter catagory...\",\n        type: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Radio.Group, {\n      name: \"radiogroup\",\n      onChange: this.changeType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Radio, {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, \"Income\"), /*#__PURE__*/React.createElement(Radio, {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 21\n      }\n    }, \"Expense\")))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"amount\",\n      label: \"Amount\",\n      rules: [{\n        required: true,\n        message: 'Please enter the amount'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Enter Amount...\",\n      value: datas.amount,\n      onChange: e => this.setState({\n        datas: { ...datas,\n          amount: e.target.value\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    }))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TransactionList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Tracker/Tracker.js"],"names":["React","Component","Balance","Chart","IncomeExpenses","TransactionList","GlobalProvider","cookie","notification","Drawer","Form","Col","Row","DatePicker","AutoComplete","Input","Radio","Option","onOk","value","console","log","loginUser","id","parseInt","load","Tracker","state","visible","error","isLoaded","inputcategory","datas","amount","date","categories","in_out","showDrawer","setState","onClose","openNotificationWithIcon","type","message","description","getCategory","res","fetch","posts","json","err","addItems","_","userid","length","tot","parseFloat","toFixed","rates","c","toString","then","catch","onChange","toISOString","onSelect_inputauto","data","onChange_inputauto","changeType","target","componentDidMount","render","paddingBottom","textAlign","marginRight","required","width","e"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Balance } from '../../components/Transaction/Balance';\nimport { Chart } from '../../components/Transaction/Chart';\nimport { IncomeExpenses } from '../../components/Transaction/IncomeExpenses';\nimport { TransactionList } from '../../components/Transaction/TransactionList';\nimport { GlobalProvider } from '../../context/GlobalState';\n\nimport cookie from 'react-cookies'\n\nimport './Tracker.css'\nimport { notification, Drawer, Form, Col, Row, DatePicker, AutoComplete, Input, Radio } from 'antd';\n\nconst Option = AutoComplete.Option;\n\nfunction onOk(value) {\n  console.log('onOk: ', value);\n}\n\nexport const loginUser = () => {\n  let id = parseInt(cookie.load('userInfo'))\n  return id\n}\n\nexport default class Tracker extends Component {\n  state = {\n    visible: false,\n    error: null,\n    isLoaded: false,\n    inputcategory: \"\",\n    datas: {\n      amount: \"\"\n    },\n    date: \"\", \n    categories: [],\n    in_out: \"\"\n  };\n\n  componentDidMount() {\n    this.getCategory()\n  }\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  openNotificationWithIcon = type => {\n    notification[type]({\n      message: 'Add',\n      description:\n        'Add new transcation success.',\n    });\n  };\n\n  getCategory = async() => {\n    try {\n      let res = await fetch(`http://ballistic-circular-parent.glitch.me/getallcategory`);\n      let posts = await res.json();\n      this.setState({\n        categories: posts\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }  \n\n  addItems = _ => {\n    const { datas, date, inputcategory, in_out } = this.state;\n      let userid = loginUser();\n      if (inputcategory.length === 0) {\n          notification['error']({\n              message: 'Add',\n              description:\n                  'Please enter the category name.',\n          });\n      } else if (datas.amount.length === 0 || parseInt(datas.amount) === 0) {\n          notification['error']({\n              message: 'Add',\n              description:\n                  'Please enter a valid number for amount (non-zero).',\n          });\n      } else {\n          var tot = parseFloat(datas.amount).toFixed(2)\n          let rates = cookie.load('rate')\n          let c = cookie.load('currency')\n          console.log(c, rates)\n          tot = tot / rates\n          if (in_out === 2) {\n            tot = tot * -1\n          }\n          var res = tot.toString()\n          \n          fetch(`https://be-4920.herokuapp.com/spending?category=${inputcategory}&amount=${res}&time=${date}&userid=${userid}`)\n              .then(console.log('Add item success'))\n              .catch(error =>\n                  this.setState({\n                      isLoaded: true,\n                      error: error\n                  })\n          );\n          this.openNotificationWithIcon('success');\n          this.onClose();\n      }\n  }\n\n  onChange = (value) => {\n    this.setState({\n      date: value.toISOString()\n    })\n  }\n\n  onSelect_inputauto = (data) => {\n    this.setState({\n      inputcategory: data\n    })\n    // console.log('onSelect', data);\n  };\n  onChange_inputauto = (data) => {\n    this.setState({\n      inputcategory: data\n    })\n    // console.log('onSelect', data);\n  };\n\n  changeType = (data) => {\n    // const value = data.target.value\n    this.setState({\n      in_out: data.target.value\n    })\n  }\n\n  render() {\n    const { datas, categories } = this.state;\n    // const children = categories.map(c => <Option key={c}>{c}</Option>);\n    // const children = categories.map(c => <Option key={c}>{c}</Option>);\n\n    return (\n      <GlobalProvider>\n        <div className=\"container\">\n          <div className=\"left_container\">\n          <Balance />\n          <Chart />\n          <IncomeExpenses />\n          <button className='back-btn' onClick={this.showDrawer} type=\"primary\">Add Transcation</button>\n          <Drawer\n            title=\"Add a new transcation\"\n            width={520}\n            onClose={this.onClose}\n            visible={this.state.visible}\n            bodyStyle={{ paddingBottom: 80 }}\n            footer={\n              <div\n                style={{\n                  textAlign: 'right',\n                }}\n              >\n                <button className='additem-btn' type=\"primary\" onClick={this.onClose} style={{ marginRight: 8 }}>Cancel</button>\n                <button className='additem-btn' onClick={() => {this.addItems();}} type=\"primary\">Add Item</button>\n              </div>\n            }\n          >\n            <Form layout=\"vertical\" hideRequiredMark>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"dateTime\"\n                    label=\"Date\"\n                    rules={[{ required: true, message: 'Please choose the dateTime' }]}\n                  >\n                    <DatePicker className='date-input' \n                      size=\"large\" \n                      style={{ width: '100%' }}\n                      onChange={this.onChange} \n                      onOk={onOk} \n                    />\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"category\"\n                    label=\"Category\"\n                    rules={[{ required: true, message: 'Please enter the category' }]}\n                  >\n                    <AutoComplete\n                        dataSource={categories}\n                        onChange={this.onChange_inputauto}\n                        onSearch={this.onSelect_inputauto}\n                        children={\n                          <Input \n                            placeholder=\"Enter catagory...\" \n                            type=\"text\"\n                          />\n                        }\n                    />\n\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Radio.Group name=\"radiogroup\" onChange={this.changeType}>\n                    <Radio value={1}>Income</Radio>\n                    <Radio value={2}>Expense</Radio>\n                  </Radio.Group>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"amount\"\n                    label=\"Amount\"\n                    rules={[{ required: true, message: 'Please enter the amount' }]}\n                  >\n                    <input \n                      type=\"number\"\n                      placeholder=\"Enter Amount...\" \n                      value={datas.amount} \n                      onChange={e => this.setState({ datas: { ...datas, amount: e.target.value}})}\n                    />\n                  </Form.Item>\n                </Col>\n              </Row>\n            </Form>\n          </Drawer>\n          </div>\n\n          <div className=\"right_container\">\n          \n            <TransactionList />\n          </div>\n          \n          \n          \n          \n        </div>\n      </GlobalProvider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}