{"ast":null,"code":"var _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Account/Account.js\";\nimport React, { Component } from 'react';\nimport cookie from 'react-cookies';\nexport default class Account extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      rates: [],\n      currencies: [],\n      baseCurrency: 'AUD'\n    };\n\n    this.callAPI = async base => {\n      try {\n        let res = await fetch(`https://api.exchangeratesapi.io/latest?base=${base}`);\n        let data = await res.json();\n        let rate = data['rates'];\n        let sort_curr = Object.keys(data['rates']).sort();\n        this.setState({\n          rates: rate,\n          currencies: sort_curr\n        });\n\n        if (cookie.load('currency') == null) {\n          cookie.save('currency', 'AUD', {\n            path: '/'\n          });\n          cookie.save('rate', rate['AUD'], {\n            path: '/'\n          });\n        }\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.changeBaseCurrency = e => {\n      const {\n        rates\n      } = this.state;\n      this.setState({\n        baseCurrency: e.target.value\n      });\n      cookie.save('currency', e.target.value, {\n        path: '/'\n      });\n      cookie.save('rate', rates[e.target.value], {\n        path: '/'\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.callAPI('AUD');\n  }\n\n  render() {\n    const {\n      currencies\n    } = this.state;\n    const currencyChoice = currencies.map(currency => /*#__PURE__*/React.createElement(\"option\", {\n      key: currency,\n      value: currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 7\n      }\n    }, \" \", currency, \" \"));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      value: cookie.load('currency'),\n      onChange: this.changeBaseCurrency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }\n    }, currencyChoice, /*#__PURE__*/React.createElement(\"option\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 11\n      }\n    }, cookie.load('currency'))));\n  }\n\n}","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Account/Account.js"],"names":["React","Component","cookie","Account","state","rates","currencies","baseCurrency","callAPI","base","res","fetch","data","json","rate","sort_curr","Object","keys","sort","setState","load","save","path","err","console","log","changeBaseCurrency","e","target","value","componentDidMount","render","currencyChoice","map","currency"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,eAAe,MAAMC,OAAN,SAAsBF,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC7CG,KAD6C,GACrC;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,UAAU,EAAE,EAFN;AAGNC,MAAAA,YAAY,EAAE;AAHR,KADqC;;AAAA,SAW7CC,OAX6C,GAWnC,MAAMC,IAAN,IAAe;AACvB,UAAI;AACF,YAAIC,GAAG,GAAG,MAAMC,KAAK,CAAE,+CAA8CF,IAAK,EAArD,CAArB;AACA,YAAIG,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAjB;AACA,YAAIC,IAAI,GAAGF,IAAI,CAAC,OAAD,CAAf;AACA,YAAIG,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYL,IAAI,CAAC,OAAD,CAAhB,EAA2BM,IAA3B,EAAhB;AACA,aAAKC,QAAL,CAAc;AACZd,UAAAA,KAAK,EAAES,IADK;AAEZR,UAAAA,UAAU,EAAES;AAFA,SAAd;;AAKA,YAAIb,MAAM,CAACkB,IAAP,CAAY,UAAZ,KAA2B,IAA/B,EAAqC;AACnClB,UAAAA,MAAM,CAACmB,IAAP,CAAY,UAAZ,EAAwB,KAAxB,EAA+B;AAAEC,YAAAA,IAAI,EAAE;AAAR,WAA/B;AACApB,UAAAA,MAAM,CAACmB,IAAP,CAAY,MAAZ,EAAoBP,IAAI,CAAC,KAAD,CAAxB,EAAiC;AAAEQ,YAAAA,IAAI,EAAE;AAAR,WAAjC;AACD;AAEF,OAfD,CAeE,OAAOC,GAAP,EAAY;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;AACF,KA9B4C;;AAAA,SAgC7CG,kBAhC6C,GAgCvBC,CAAD,IAAO;AAC1B,YAAM;AAAEtB,QAAAA;AAAF,UAAY,KAAKD,KAAvB;AACA,WAAKe,QAAL,CAAc;AAAEZ,QAAAA,YAAY,EAAEoB,CAAC,CAACC,MAAF,CAASC;AAAzB,OAAd;AACA3B,MAAAA,MAAM,CAACmB,IAAP,CAAY,UAAZ,EAAwBM,CAAC,CAACC,MAAF,CAASC,KAAjC,EAAwC;AAAEP,QAAAA,IAAI,EAAE;AAAR,OAAxC;AACApB,MAAAA,MAAM,CAACmB,IAAP,CAAY,MAAZ,EAAoBhB,KAAK,CAACsB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAzB,EAA2C;AAAEP,QAAAA,IAAI,EAAE;AAAR,OAA3C;AACD,KArC4C;AAAA;;AAO7CQ,EAAAA,iBAAiB,GAAG;AAClB,SAAKtB,OAAL,CAAa,KAAb;AACD;;AA8BDuB,EAAAA,MAAM,GAAG;AACP,UAAM;AAAEzB,MAAAA;AAAF,QAAiB,KAAKF,KAA5B;AAEA,UAAM4B,cAAc,GAAG1B,UAAU,CAAC2B,GAAX,CAAeC,QAAQ,iBAC5C;AAAQ,MAAA,GAAG,EAAEA,QAAb;AAAuB,MAAA,KAAK,EAAEA,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA0CA,QAA1C,MADqB,CAAvB;AAGA,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAS,MAAA,KAAK,EAAEhC,MAAM,CAACkB,IAAP,CAAY,UAAZ,CAAhB;AAAyC,MAAA,QAAQ,EAAE,KAAKM,kBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGM,cADH,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAS9B,MAAM,CAACkB,IAAP,CAAY,UAAZ,CAAT,CAFF,CADF,CADF;AAQD;;AArD4C","sourcesContent":["import React, { Component } from 'react';\nimport cookie from 'react-cookies'\n\nexport default class Account extends Component {\n  state = {\n    rates: [],\n    currencies: [],\n    baseCurrency: 'AUD'\n  };\n\n  componentDidMount() {\n    this.callAPI('AUD')\n  }\n\n  callAPI = async(base) => {\n    try {\n      let res = await fetch(`https://api.exchangeratesapi.io/latest?base=${base}`);\n      let data = await res.json();\n      let rate = data['rates']\n      let sort_curr = Object.keys(data['rates']).sort()\n      this.setState({\n        rates: rate,\n        currencies: sort_curr\n      })\n\n      if (cookie.load('currency') == null) {\n        cookie.save('currency', 'AUD', { path: '/' })\n        cookie.save('rate', rate['AUD'], { path: '/' })\n      }\n\n    } catch (err) {\n      console.log(err);\n    }\n  } \n\n  changeBaseCurrency = (e) => {\n    const { rates } = this.state;\n    this.setState({ baseCurrency: e.target.value});\n    cookie.save('currency', e.target.value, { path: '/' })\n    cookie.save('rate', rates[e.target.value], { path: '/' })\n  }\n\n  render() {\n    const { currencies } = this.state;\n\n    const currencyChoice = currencies.map(currency =>\n      <option key={currency} value={currency}> {currency} </option>      \n    );\n    return (\n      <div>\n        <select  value={cookie.load('currency')} onChange={this.changeBaseCurrency}>\n          {currencyChoice}\n          <option>{cookie.load('currency')}</option>\n        </select>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}