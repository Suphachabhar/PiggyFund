{"ast":null,"code":"var _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/components/Budget/Balance.js\";\nimport React, { useContext } from 'react';\nimport { GlobalContext_budget } from '../../context/GlobalState_budget';\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nexport const trackerData = () => {\n  return cookie.load('trackerData');\n};\nexport const Balance_budget = () => {\n  //   const { transactions } = useContext(GlobalContext);\n  const {\n    budgets\n  } = useContext(GlobalContext_budget);\n  const amounts = budgets.map(budgets => budgets.Amount);\n\n  function calculateProgress(budgets) {\n    const transactions = trackerData();\n    var results = [];\n    budgets.forEach(function (b) {\n      results.push(b);\n      results[results.length - 1].Progress = 0;\n      results[results.length - 1].Spent = 0;\n    });\n    transactions.forEach(function (t) {\n      results.forEach(function (b) {\n        if (b.Category.toUpperCase().localeCompare(t.Category.toUpperCase()) === 0 && b.Month === moment(t.Time).format('MMMM')) {\n          var cost = parseFloat(t.Amount).toFixed(2);\n          b.Spent -= cost;\n        }\n      });\n    }); // const convertToCurrency = cookie.load('currency');\n\n    const rates = cookie.load('rate');\n    let total = [];\n    total.spent = 0;\n    total.amount = 0;\n    results.forEach(function (b) {\n      var newSpent = parseFloat(b.Spent * rates).toFixed(2);\n      var newAmount = parseFloat(b.Amount * rates).toFixed(2);\n      b.Progress = newSpent / newAmount;\n      b.Spent = b.Progress * newAmount;\n      b.newAmount = newAmount;\n      total.amount += b.Amount;\n      total.spent += b.Spent;\n    }); // budgets.total_spent = total_spent;\n    // budgets.total_amount = total_amount;\n\n    return total;\n  }\n\n  ;\n  const total = calculateProgress(budgets);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"Your Budget\"), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, total), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inc-exp-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"Total\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"money plus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, total.amount)), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, \"Expense\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"money minus\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, total.spent))));\n};","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/components/Budget/Balance.js"],"names":["React","useContext","GlobalContext_budget","cookie","moment","trackerData","load","Balance_budget","budgets","amounts","map","Amount","calculateProgress","transactions","results","forEach","b","push","length","Progress","Spent","t","Category","toUpperCase","localeCompare","Month","Time","format","cost","parseFloat","toFixed","rates","total","spent","amount","newSpent","newAmount"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { GlobalContext_budget } from '../../context/GlobalState_budget';\nimport cookie from 'react-cookies'\nimport moment from 'moment';\n\nexport const trackerData = () => {\n    return cookie.load('trackerData')\n}\n\nexport const Balance_budget = () => {\n//   const { transactions } = useContext(GlobalContext);\n  const { budgets } = useContext(GlobalContext_budget);\n\n  const amounts = budgets.map(budgets => budgets.Amount);\n\n\n    function calculateProgress(budgets) {\n        const transactions = trackerData();\n        var results = [];\n\n        budgets.forEach(function (b) {\n            results.push(b);\n            results[results.length - 1].Progress = 0;\n            results[results.length - 1].Spent = 0;\n        });\n\n        transactions.forEach(function (t) {\n            results.forEach(function (b) {\n                if (b.Category.toUpperCase().localeCompare(t.Category.toUpperCase()) === 0 && b.Month === moment(t.Time).format('MMMM')) {\n                    var cost = parseFloat(t.Amount).toFixed(2)\n                    b.Spent -= cost;\n                }\n            });\n        });\n\n        // const convertToCurrency = cookie.load('currency');\n        const rates = cookie.load('rate');\n\n        let total = [];\n        total.spent = 0;\n        total.amount = 0;\n        results.forEach(function (b) {\n            var newSpent = parseFloat(b.Spent * rates).toFixed(2);\n            var newAmount = parseFloat(b.Amount * rates).toFixed(2);\n            b.Progress = newSpent / newAmount;\n            b.Spent = b.Progress * newAmount;\n            b.newAmount = newAmount;\n            total.amount += b.Amount;\n            total.spent += b.Spent;\n        });\n\n        // budgets.total_spent = total_spent;\n        // budgets.total_amount = total_amount;\n\n        return total;\n    };\n\n\n  const total = calculateProgress(budgets)\n\n  return (\n    <>\n      <h3>Your Budget</h3>\n      <h1>{total}</h1>\n      <div className=\"inc-exp-container\">\n        <div>\n          <h4>Total</h4>\n          <p className=\"money plus\">{total.amount}</p>\n        </div>\n        <div>\n          <h4>Expense</h4>\n          <p className=\"money minus\">{total.spent}</p>\n        </div>\n      </div>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}