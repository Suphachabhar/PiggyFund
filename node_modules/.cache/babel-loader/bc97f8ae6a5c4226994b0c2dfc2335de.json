{"ast":null,"code":"var _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/components/Budget/BudgetList.js\";\nimport React, { useContext } from 'react';\nimport { Budget } from './Budget';\nimport { GlobalContext_budget } from '../../context/GlobalState_budget'; // import { GlobalContext } from '../../context/GlobalState';\n\nimport cookie from 'react-cookies';\nimport moment from 'moment';\nimport './Progress.css';\nexport const trackerData = () => {\n  return cookie.load('trackerData');\n};\nexport const BudgetList = () => {\n  const {\n    budgets\n  } = useContext(GlobalContext_budget);\n  const transactions = trackerData();\n\n  function calculateProgress(budgets, transactions) {\n    var results = [];\n    budgets.forEach(function (b) {\n      results.push(b);\n      results[results.length - 1].Progress = 0;\n      results[results.length - 1].Spent = 0;\n    });\n    transactions.forEach(function (t) {\n      results.forEach(function (b) {\n        if (b.Category.toUpperCase().localeCompare(t.Category.toUpperCase()) === 0 && b.Month === moment(t.Time).format('MMMM')) {\n          var cost = parseFloat(t.Amount).toFixed(2);\n          b.Spent -= cost;\n        }\n      });\n    }); // const convertToCurrency = cookie.load('currency');\n\n    const rates = cookie.load('rate');\n    results.forEach(function (b) {\n      var newSpent = parseFloat(b.Spent * rates).toFixed(2);\n      var newAmount = parseFloat(b.Amount * rates).toFixed(2);\n      b.Progress = newSpent / newAmount;\n      b.Spent = b.Progress * newAmount;\n      b.newAmount = newAmount; // b.Progress = b.Spent / b.Amount;\n      // b.Spent = b.Progress * b.Amount;\n\n      if (b.Progress >= 0.50) {\n        b.alert = \"over 50\"; // console.log('over 50')\n      }\n    });\n    return budgets;\n  }\n\n  ;\n  const budgetsWithProgress = calculateProgress(budgets, transactions);\n\n  function budgetListContent(budgets) {\n    if (budgets.length == 0) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }\n      }, \"There is no budget in this month.\");\n    } else {\n      return budgets.map(budget => {\n        return /*#__PURE__*/React.createElement(Budget, {\n          key: budget._id,\n          budget: budget,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 21\n          }\n        });\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, \"Lists\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, budgetListContent(budgetsWithProgress)));\n};","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/components/Budget/BudgetList.js"],"names":["React","useContext","Budget","GlobalContext_budget","cookie","moment","trackerData","load","BudgetList","budgets","transactions","calculateProgress","results","forEach","b","push","length","Progress","Spent","t","Category","toUpperCase","localeCompare","Month","Time","format","cost","parseFloat","Amount","toFixed","rates","newSpent","newAmount","alert","budgetsWithProgress","budgetListContent","map","budget","_id"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react';\nimport { Budget } from './Budget';\nimport { GlobalContext_budget } from '../../context/GlobalState_budget';\n// import { GlobalContext } from '../../context/GlobalState';\nimport cookie from 'react-cookies'\nimport moment from 'moment';\n\nimport './Progress.css';\n\nexport const trackerData = () => {\n    return cookie.load('trackerData')\n}\n\nexport const BudgetList = () => {\n    const { budgets } = useContext(GlobalContext_budget);\n    const transactions = trackerData();\n\n    function calculateProgress(budgets, transactions) {\n        var results = [];\n\n        budgets.forEach(function (b) {\n            results.push(b);\n            results[results.length - 1].Progress = 0;\n            results[results.length - 1].Spent = 0;\n        });\n\n        transactions.forEach(function (t) {\n            results.forEach(function (b) {\n                if (b.Category.toUpperCase().localeCompare(t.Category.toUpperCase()) === 0 && b.Month === moment(t.Time).format('MMMM')) {\n                    var cost = parseFloat(t.Amount).toFixed(2)\n                    b.Spent -= cost;\n                }\n            });\n        });\n\n        // const convertToCurrency = cookie.load('currency');\n        const rates = cookie.load('rate');\n\n        results.forEach(function (b) {\n            var newSpent = parseFloat(b.Spent * rates).toFixed(2);\n            var newAmount = parseFloat(b.Amount * rates).toFixed(2);\n            b.Progress = newSpent / newAmount;\n            b.Spent = b.Progress * newAmount;\n            b.newAmount = newAmount;\n\n            // b.Progress = b.Spent / b.Amount;\n            // b.Spent = b.Progress * b.Amount;\n\n            if(b.Progress >= 0.50) {\n                b.alert = \"over 50\";\n                // console.log('over 50')\n            }\n        });\n\n        return budgets;\n    };\n\n    const budgetsWithProgress = calculateProgress(budgets, transactions);\n\n    function budgetListContent(budgets) {\n        if (budgets.length == 0) {\n            return (<p>There is no budget in this month.</p>);\n        } else {\n            return (budgets.map(budget => {\n                return (\n                    <Budget key={budget._id} budget={budget} />\n                )\n            }));\n        }\n    }\n\n    return (\n        <>\n            <h3>Lists</h3>\n            <ul className=\"list\">\n                {budgetListContent(budgetsWithProgress)}\n            </ul>\n        </>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}