{"ast":null,"code":"var _jsxFileName = \"/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Tracker/Tracker.js\";\nimport React, { Component } from 'react';\nimport { Balance } from '../../components/Transaction/Balance';\nimport { Chart } from '../../components/Transaction/Chart';\nimport { IncomeExpenses } from '../../components/Transaction/IncomeExpenses';\nimport { TransactionList } from '../../components/Transaction/TransactionList';\nimport { GlobalProvider } from '../../context/GlobalState';\nimport cookie from 'react-cookies';\nimport './Tracker.css';\nimport { notification, Drawer, Form, Col, Row, DatePicker, AutoComplete, Input } from 'antd';\n\nfunction onOk(value) {\n  console.log('onOk: ', value);\n}\n\nexport const loginUser = () => {\n  let id = parseInt(cookie.load('userInfo'));\n  return id;\n};\nexport default class Tracker extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visible: false,\n      error: null,\n      isLoaded: false,\n      inputcategory: \"\",\n      datas: {\n        amount: \"\"\n      },\n      date: \"\",\n      categories: [],\n      rates: [],\n      currencies: [],\n      baseCurrency: 'AUD'\n    };\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.openNotificationWithIcon = type => {\n      notification[type]({\n        message: 'Add',\n        description: 'Add new transcation success.'\n      });\n    };\n\n    this.getCategory = async () => {\n      try {\n        let res = await fetch(`http://ballistic-circular-parent.glitch.me/getallcategory`);\n        let posts = await res.json();\n        this.setState({\n          categories: posts\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.callAPI = async base => {\n      try {\n        let res = await fetch(`https://api.exchangeratesapi.io/latest?base=${base}`);\n        let data = await res.json();\n        let rate = data['rates'];\n        let sort_curr = Object.keys(data['rates']).sort();\n        this.setState({\n          rates: rate,\n          currencies: sort_curr\n        }); // let storage = window.localStorage;\n        // storage.rates = JSON.stringify(rate);\n        // storage.currencies = JSON.stringify(sort_curr);\n\n        if (cookie.load('currency') == null) {\n          cookie.save('currency', 'AUD', {\n            path: '/'\n          });\n          cookie.save('rate', rate['AUD'], {\n            path: '/'\n          });\n        } // console.log(sort_curr)\n\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.addItems = _ => {\n      const {\n        datas,\n        date,\n        inputcategory\n      } = this.state;\n      let userid = loginUser();\n\n      if (inputcategory.length === 0) {\n        notification['error']({\n          message: 'Add',\n          description: 'Please enter the category name.'\n        });\n      } else if (datas.amount.length === 0 || parseInt(datas.amount) === 0) {\n        notification['error']({\n          message: 'Add',\n          description: 'Please enter a valid number for amount (non-zero).'\n        });\n      } else {\n        fetch(`https://be-4920.herokuapp.com/spending?category=${inputcategory}&amount=${datas.amount}&time=${date}&userid=${userid}`).then(console.log('Add item success')).catch(error => this.setState({\n          isLoaded: true,\n          error: error\n        }));\n        this.openNotificationWithIcon('success');\n        this.onClose();\n      }\n    };\n\n    this.onChange = value => {\n      this.setState({\n        date: value.toISOString()\n      });\n    };\n\n    this.onSelect_inputauto = data => {\n      this.setState({\n        inputcategory: data\n      }); // console.log('onSelect', data);\n    };\n\n    this.onChange_inputauto = data => {\n      this.setState({\n        inputcategory: data\n      }); // console.log('onSelect', data);\n    };\n\n    this.changeBaseCurrency = e => {\n      const {\n        rates\n      } = this.state;\n      this.setState({\n        baseCurrency: e.target.value\n      });\n      cookie.save('currency', e.target.value, {\n        path: '/'\n      });\n      cookie.save('rate', rates[e.target.value], {\n        path: '/'\n      }); // cookie.save('changeCurr', 'yes', { path: '/' })\n      // this.callAPI(this.baseCurrency)\n      // console.log(e.target.value)\n    };\n  }\n\n  componentDidMount() {\n    this.getCategory();\n    this.callAPI('AUD');\n  }\n\n  render() {\n    // const { datas, categories } = this.state;\n    const {\n      datas,\n      categories,\n      currencies\n    } = this.state;\n    const currencyChoice = currencies.map(currency => /*#__PURE__*/React.createElement(\"option\", {\n      key: currency,\n      value: currency,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 7\n      }\n    }, \" \", currency, \" \"));\n    return /*#__PURE__*/React.createElement(GlobalProvider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Balance, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(Chart, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(IncomeExpenses, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"back-btn\",\n      onClick: this.showDrawer,\n      type: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }\n    }, \"Add Transcation\"), /*#__PURE__*/React.createElement(Drawer, {\n      title: \"Add a new transcation\",\n      width: 520,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      bodyStyle: {\n        paddingBottom: 80\n      },\n      footer: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          textAlign: 'right'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"additem-btn\",\n        type: \"primary\",\n        onClick: this.onClose,\n        style: {\n          marginRight: 8\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 17\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"additem-btn\",\n        onClick: () => {\n          this.addItems();\n        },\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 17\n        }\n      }, \"Add Item\")),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      layout: \"vertical\",\n      hideRequiredMark: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"dateTime\",\n      label: \"DateTime\",\n      rules: [{\n        required: true,\n        message: 'Please choose the dateTime'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      className: \"date-input\",\n      size: \"large\",\n      style: {\n        width: '100%'\n      },\n      onChange: this.onChange,\n      onOk: onOk,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"category\",\n      label: \"Category\",\n      rules: [{\n        required: true,\n        message: 'Please enter the category'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(AutoComplete, {\n      dataSource: categories,\n      onChange: this.onChange_inputauto,\n      onSearch: this.onSelect_inputauto,\n      children: /*#__PURE__*/React.createElement(Input, {\n        placeholder: \"Enter catagory...\",\n        type: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 21\n      }\n    })))), /*#__PURE__*/React.createElement(Row, {\n      gutter: 16,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Item, {\n      name: \"amount\",\n      label: \"Amount\",\n      rules: [{\n        required: true,\n        message: 'Please enter the amount'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      placeholder: \"Enter Amount...\",\n      value: datas.amount,\n      onChange: e => this.setState({\n        datas: { ...datas,\n          amount: e.target.value\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 21\n      }\n    }))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right_container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(TransactionList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 13\n      }\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/suphachabharnigrodhananda/Desktop/4920/4920_project/src/pages/Tracker/Tracker.js"],"names":["React","Component","Balance","Chart","IncomeExpenses","TransactionList","GlobalProvider","cookie","notification","Drawer","Form","Col","Row","DatePicker","AutoComplete","Input","onOk","value","console","log","loginUser","id","parseInt","load","Tracker","state","visible","error","isLoaded","inputcategory","datas","amount","date","categories","rates","currencies","baseCurrency","showDrawer","setState","onClose","openNotificationWithIcon","type","message","description","getCategory","res","fetch","posts","json","err","callAPI","base","data","rate","sort_curr","Object","keys","sort","save","path","addItems","_","userid","length","then","catch","onChange","toISOString","onSelect_inputauto","onChange_inputauto","changeBaseCurrency","e","target","componentDidMount","render","currencyChoice","map","currency","paddingBottom","textAlign","marginRight","required","width"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,SAASC,OAAT,QAAwB,sCAAxB;AACA,SAASC,KAAT,QAAsB,oCAAtB;AACA,SAASC,cAAT,QAA+B,6CAA/B;AACA,SAASC,eAAT,QAAgC,8CAAhC;AACA,SAASC,cAAT,QAA+B,2BAA/B;AAEA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,OAAO,eAAP;AACA,SAASC,YAAT,EAAuBC,MAAvB,EAA+BC,IAA/B,EAAqCC,GAArC,EAA0CC,GAA1C,EAA+CC,UAA/C,EAA2DC,YAA3D,EAAyEC,KAAzE,QAAsF,MAAtF;;AAEA,SAASC,IAAT,CAAcC,KAAd,EAAqB;AACnBC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,KAAtB;AACD;;AAED,OAAO,MAAMG,SAAS,GAAG,MAAM;AAC7B,MAAIC,EAAE,GAAGC,QAAQ,CAACf,MAAM,CAACgB,IAAP,CAAY,UAAZ,CAAD,CAAjB;AACA,SAAOF,EAAP;AACD,CAHM;AAKP,eAAe,MAAMG,OAAN,SAAsBvB,SAAtB,CAAgC;AAAA;AAAA;AAAA,SAC7CwB,KAD6C,GACrC;AACNC,MAAAA,OAAO,EAAE,KADH;AAENC,MAAAA,KAAK,EAAE,IAFD;AAGNC,MAAAA,QAAQ,EAAE,KAHJ;AAINC,MAAAA,aAAa,EAAE,EAJT;AAKNC,MAAAA,KAAK,EAAE;AACLC,QAAAA,MAAM,EAAE;AADH,OALD;AAQNC,MAAAA,IAAI,EAAE,EARA;AASNC,MAAAA,UAAU,EAAE,EATN;AAUNC,MAAAA,KAAK,EAAE,EAVD;AAWNC,MAAAA,UAAU,EAAE,EAXN;AAYNC,MAAAA,YAAY,EAAE;AAZR,KADqC;;AAAA,SAqB7CC,UArB6C,GAqBhC,MAAM;AACjB,WAAKC,QAAL,CAAc;AACZZ,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD,KAzB4C;;AAAA,SA2B7Ca,OA3B6C,GA2BnC,MAAM;AACd,WAAKD,QAAL,CAAc;AACZZ,QAAAA,OAAO,EAAE;AADG,OAAd;AAGD,KA/B4C;;AAAA,SAiC7Cc,wBAjC6C,GAiClBC,IAAI,IAAI;AACjCjC,MAAAA,YAAY,CAACiC,IAAD,CAAZ,CAAmB;AACjBC,QAAAA,OAAO,EAAE,KADQ;AAEjBC,QAAAA,WAAW,EACT;AAHe,OAAnB;AAKD,KAvC4C;;AAAA,SAyC7CC,WAzC6C,GAyC/B,YAAW;AACvB,UAAI;AACF,YAAIC,GAAG,GAAG,MAAMC,KAAK,CAAE,2DAAF,CAArB;AACA,YAAIC,KAAK,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAlB;AACA,aAAKV,QAAL,CAAc;AACZL,UAAAA,UAAU,EAAEc;AADA,SAAd;AAGD,OAND,CAME,OAAOE,GAAP,EAAY;AACZ/B,QAAAA,OAAO,CAACC,GAAR,CAAY8B,GAAZ;AACD;AACF,KAnD4C;;AAAA,SAqD7CC,OArD6C,GAqDnC,MAAMC,IAAN,IAAe;AACvB,UAAI;AACF,YAAIN,GAAG,GAAG,MAAMC,KAAK,CAAE,+CAA8CK,IAAK,EAArD,CAArB;AACA,YAAIC,IAAI,GAAG,MAAMP,GAAG,CAACG,IAAJ,EAAjB;AACA,YAAIK,IAAI,GAAGD,IAAI,CAAC,OAAD,CAAf;AACA,YAAIE,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAYJ,IAAI,CAAC,OAAD,CAAhB,EAA2BK,IAA3B,EAAhB;AACA,aAAKnB,QAAL,CAAc;AACZJ,UAAAA,KAAK,EAAEmB,IADK;AAEZlB,UAAAA,UAAU,EAAEmB;AAFA,SAAd,EALE,CAUF;AACA;AACA;;AAEA,YAAI/C,MAAM,CAACgB,IAAP,CAAY,UAAZ,KAA2B,IAA/B,EAAqC;AACnChB,UAAAA,MAAM,CAACmD,IAAP,CAAY,UAAZ,EAAwB,KAAxB,EAA+B;AAAEC,YAAAA,IAAI,EAAE;AAAR,WAA/B;AACApD,UAAAA,MAAM,CAACmD,IAAP,CAAY,MAAZ,EAAoBL,IAAI,CAAC,KAAD,CAAxB,EAAiC;AAAEM,YAAAA,IAAI,EAAE;AAAR,WAAjC;AACD,SAjBC,CAmBF;;AAED,OArBD,CAqBE,OAAOV,GAAP,EAAY;AACZ/B,QAAAA,OAAO,CAACC,GAAR,CAAY8B,GAAZ;AACD;AACF,KA9E4C;;AAAA,SAgF7CW,QAhF6C,GAgFlCC,CAAC,IAAI;AACd,YAAM;AAAE/B,QAAAA,KAAF;AAASE,QAAAA,IAAT;AAAeH,QAAAA;AAAf,UAAiC,KAAKJ,KAA5C;AACE,UAAIqC,MAAM,GAAG1C,SAAS,EAAtB;;AACA,UAAIS,aAAa,CAACkC,MAAd,KAAyB,CAA7B,EAAgC;AAC5BvD,QAAAA,YAAY,CAAC,OAAD,CAAZ,CAAsB;AAClBkC,UAAAA,OAAO,EAAE,KADS;AAElBC,UAAAA,WAAW,EACP;AAHc,SAAtB;AAKH,OAND,MAMO,IAAIb,KAAK,CAACC,MAAN,CAAagC,MAAb,KAAwB,CAAxB,IAA6BzC,QAAQ,CAACQ,KAAK,CAACC,MAAP,CAAR,KAA2B,CAA5D,EAA+D;AAClEvB,QAAAA,YAAY,CAAC,OAAD,CAAZ,CAAsB;AAClBkC,UAAAA,OAAO,EAAE,KADS;AAElBC,UAAAA,WAAW,EACP;AAHc,SAAtB;AAKH,OANM,MAMA;AACHG,QAAAA,KAAK,CAAE,mDAAkDjB,aAAc,WAAUC,KAAK,CAACC,MAAO,SAAQC,IAAK,WAAU8B,MAAO,EAAvH,CAAL,CACKE,IADL,CACU9C,OAAO,CAACC,GAAR,CAAY,kBAAZ,CADV,EAEK8C,KAFL,CAEWtC,KAAK,IACR,KAAKW,QAAL,CAAc;AACVV,UAAAA,QAAQ,EAAE,IADA;AAEVD,UAAAA,KAAK,EAAEA;AAFG,SAAd,CAHR;AAQA,aAAKa,wBAAL,CAA8B,SAA9B;AACA,aAAKD,OAAL;AACH;AACJ,KA3G4C;;AAAA,SA6G7C2B,QA7G6C,GA6GjCjD,KAAD,IAAW;AACpB,WAAKqB,QAAL,CAAc;AACZN,QAAAA,IAAI,EAAEf,KAAK,CAACkD,WAAN;AADM,OAAd;AAGD,KAjH4C;;AAAA,SAmH7CC,kBAnH6C,GAmHvBhB,IAAD,IAAU;AAC7B,WAAKd,QAAL,CAAc;AACZT,QAAAA,aAAa,EAAEuB;AADH,OAAd,EAD6B,CAI7B;AACD,KAxH4C;;AAAA,SAyH7CiB,kBAzH6C,GAyHvBjB,IAAD,IAAU;AAC7B,WAAKd,QAAL,CAAc;AACZT,QAAAA,aAAa,EAAEuB;AADH,OAAd,EAD6B,CAI7B;AACD,KA9H4C;;AAAA,SAgI7CkB,kBAhI6C,GAgIvBC,CAAD,IAAO;AAC1B,YAAM;AAAErC,QAAAA;AAAF,UAAY,KAAKT,KAAvB;AAEA,WAAKa,QAAL,CAAc;AAAEF,QAAAA,YAAY,EAAEmC,CAAC,CAACC,MAAF,CAASvD;AAAzB,OAAd;AACAV,MAAAA,MAAM,CAACmD,IAAP,CAAY,UAAZ,EAAwBa,CAAC,CAACC,MAAF,CAASvD,KAAjC,EAAwC;AAAE0C,QAAAA,IAAI,EAAE;AAAR,OAAxC;AACApD,MAAAA,MAAM,CAACmD,IAAP,CAAY,MAAZ,EAAoBxB,KAAK,CAACqC,CAAC,CAACC,MAAF,CAASvD,KAAV,CAAzB,EAA2C;AAAE0C,QAAAA,IAAI,EAAE;AAAR,OAA3C,EAL0B,CAM1B;AACA;AACA;AACD,KAzI4C;AAAA;;AAgB7Cc,EAAAA,iBAAiB,GAAG;AAClB,SAAK7B,WAAL;AACA,SAAKM,OAAL,CAAa,KAAb;AACD;;AAwHDwB,EAAAA,MAAM,GAAG;AACP;AAEA,UAAM;AAAE5C,MAAAA,KAAF;AAASG,MAAAA,UAAT;AAAqBE,MAAAA;AAArB,QAAoC,KAAKV,KAA/C;AAEA,UAAMkD,cAAc,GAAGxC,UAAU,CAACyC,GAAX,CAAeC,QAAQ,iBAC5C;AAAQ,MAAA,GAAG,EAAEA,QAAb;AAAuB,MAAA,KAAK,EAAEA,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA0CA,QAA1C,MADqB,CAAvB;AAGA,wBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACA,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,eAEA,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,eAGA,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,eAIA;AAAQ,MAAA,SAAS,EAAC,UAAlB;AAA6B,MAAA,OAAO,EAAE,KAAKxC,UAA3C;AAAuD,MAAA,IAAI,EAAC,SAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAJA,eAKA,oBAAC,MAAD;AACE,MAAA,KAAK,EAAC,uBADR;AAEE,MAAA,KAAK,EAAE,GAFT;AAGE,MAAA,OAAO,EAAE,KAAKE,OAHhB;AAIE,MAAA,OAAO,EAAE,KAAKd,KAAL,CAAWC,OAJtB;AAKE,MAAA,SAAS,EAAE;AAAEoD,QAAAA,aAAa,EAAE;AAAjB,OALb;AAME,MAAA,MAAM,eACJ;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,SAAS,EAAE;AADN,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKE;AAAQ,QAAA,SAAS,EAAC,aAAlB;AAAgC,QAAA,IAAI,EAAC,SAArC;AAA+C,QAAA,OAAO,EAAE,KAAKxC,OAA7D;AAAsE,QAAA,KAAK,EAAE;AAAEyC,UAAAA,WAAW,EAAE;AAAf,SAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF,eAME;AAAQ,QAAA,SAAS,EAAC,aAAlB;AAAgC,QAAA,OAAO,EAAE,MAAM;AAAC,eAAKpB,QAAL;AAAiB,SAAjE;AAAmE,QAAA,IAAI,EAAC,SAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBANF,CAPJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAiBE,oBAAC,IAAD;AAAM,MAAA,MAAM,EAAC,UAAb;AAAwB,MAAA,gBAAgB,MAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,IAAI,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,KAAK,EAAC,UAFR;AAGE,MAAA,KAAK,EAAE,CAAC;AAAEqB,QAAAA,QAAQ,EAAE,IAAZ;AAAkBvC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAC,YAAtB;AACE,MAAA,IAAI,EAAC,OADP;AAEE,MAAA,KAAK,EAAE;AAAEwC,QAAAA,KAAK,EAAE;AAAT,OAFT;AAGE,MAAA,QAAQ,EAAE,KAAKhB,QAHjB;AAIE,MAAA,IAAI,EAAElD,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CADF,CADF,CADF,eAiBE,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,IAAI,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,UADP;AAEE,MAAA,KAAK,EAAC,UAFR;AAGE,MAAA,KAAK,EAAE,CAAC;AAAEiE,QAAAA,QAAQ,EAAE,IAAZ;AAAkBvC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE,oBAAC,YAAD;AACI,MAAA,UAAU,EAAET,UADhB;AAEI,MAAA,QAAQ,EAAE,KAAKoC,kBAFnB;AAGI,MAAA,QAAQ,EAAE,KAAKD,kBAHnB;AAII,MAAA,QAAQ,eACN,oBAAC,KAAD;AACE,QAAA,WAAW,EAAC,mBADd;AAEE,QAAA,IAAI,EAAC,MAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CADF,CADF,CAjBF,eAsCE,oBAAC,GAAD;AAAK,MAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,GAAD;AAAK,MAAA,IAAI,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD,CAAM,IAAN;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,KAAK,EAAC,QAFR;AAGE,MAAA,KAAK,EAAE,CAAC;AAAEa,QAAAA,QAAQ,EAAE,IAAZ;AAAkBvC,QAAAA,OAAO,EAAE;AAA3B,OAAD,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AACE,MAAA,IAAI,EAAC,QADP;AAEE,MAAA,WAAW,EAAC,iBAFd;AAGE,MAAA,KAAK,EAAEZ,KAAK,CAACC,MAHf;AAIE,MAAA,QAAQ,EAAEwC,CAAC,IAAI,KAAKjC,QAAL,CAAc;AAAER,QAAAA,KAAK,EAAE,EAAE,GAAGA,KAAL;AAAYC,UAAAA,MAAM,EAAEwC,CAAC,CAACC,MAAF,CAASvD;AAA7B;AAAT,OAAd,CAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALF,CADF,CADF,CAtCF,CAjBF,CALA,CADF,eAiFE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,CAjFF,CADF,CADF;AA8FD;;AAjP4C","sourcesContent":["import React, { Component } from 'react';\n\nimport { Balance } from '../../components/Transaction/Balance';\nimport { Chart } from '../../components/Transaction/Chart';\nimport { IncomeExpenses } from '../../components/Transaction/IncomeExpenses';\nimport { TransactionList } from '../../components/Transaction/TransactionList';\nimport { GlobalProvider } from '../../context/GlobalState';\n\nimport cookie from 'react-cookies'\n\nimport './Tracker.css'\nimport { notification, Drawer, Form, Col, Row, DatePicker, AutoComplete, Input } from 'antd';\n\nfunction onOk(value) {\n  console.log('onOk: ', value);\n}\n\nexport const loginUser = () => {\n  let id = parseInt(cookie.load('userInfo'))\n  return id\n}\n\nexport default class Tracker extends Component {\n  state = {\n    visible: false,\n    error: null,\n    isLoaded: false,\n    inputcategory: \"\",\n    datas: {\n      amount: \"\"\n    },\n    date: \"\", \n    categories: [],\n    rates: [],\n    currencies: [],\n    baseCurrency: 'AUD'\n  };\n\n  componentDidMount() {\n    this.getCategory()\n    this.callAPI('AUD')\n  }\n\n  showDrawer = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n\n  onClose = () => {\n    this.setState({\n      visible: false,\n    });\n  };\n\n  openNotificationWithIcon = type => {\n    notification[type]({\n      message: 'Add',\n      description:\n        'Add new transcation success.',\n    });\n  };\n\n  getCategory = async() => {\n    try {\n      let res = await fetch(`http://ballistic-circular-parent.glitch.me/getallcategory`);\n      let posts = await res.json();\n      this.setState({\n        categories: posts\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }  \n\n  callAPI = async(base) => {\n    try {\n      let res = await fetch(`https://api.exchangeratesapi.io/latest?base=${base}`);\n      let data = await res.json();\n      let rate = data['rates']\n      let sort_curr = Object.keys(data['rates']).sort()\n      this.setState({\n        rates: rate,\n        currencies: sort_curr\n      })\n      \n      // let storage = window.localStorage;\n      // storage.rates = JSON.stringify(rate);\n      // storage.currencies = JSON.stringify(sort_curr);\n\n      if (cookie.load('currency') == null) {\n        cookie.save('currency', 'AUD', { path: '/' })\n        cookie.save('rate', rate['AUD'], { path: '/' })\n      }\n\n      // console.log(sort_curr)\n\n    } catch (err) {\n      console.log(err);\n    }\n  } \n\n  addItems = _ => {\n    const { datas, date, inputcategory } = this.state;\n      let userid = loginUser();\n      if (inputcategory.length === 0) {\n          notification['error']({\n              message: 'Add',\n              description:\n                  'Please enter the category name.',\n          });\n      } else if (datas.amount.length === 0 || parseInt(datas.amount) === 0) {\n          notification['error']({\n              message: 'Add',\n              description:\n                  'Please enter a valid number for amount (non-zero).',\n          });\n      } else {\n          fetch(`https://be-4920.herokuapp.com/spending?category=${inputcategory}&amount=${datas.amount}&time=${date}&userid=${userid}`)\n              .then(console.log('Add item success'))\n              .catch(error =>\n                  this.setState({\n                      isLoaded: true,\n                      error: error\n                  })\n          );\n          this.openNotificationWithIcon('success');\n          this.onClose();\n      }\n  }\n\n  onChange = (value) => {\n    this.setState({\n      date: value.toISOString()\n    })\n  }\n\n  onSelect_inputauto = (data) => {\n    this.setState({\n      inputcategory: data\n    })\n    // console.log('onSelect', data);\n  };\n  onChange_inputauto = (data) => {\n    this.setState({\n      inputcategory: data\n    })\n    // console.log('onSelect', data);\n  };\n\n  changeBaseCurrency = (e) => {\n    const { rates } = this.state;\n\n    this.setState({ baseCurrency: e.target.value});\n    cookie.save('currency', e.target.value, { path: '/' })\n    cookie.save('rate', rates[e.target.value], { path: '/' })\n    // cookie.save('changeCurr', 'yes', { path: '/' })\n    // this.callAPI(this.baseCurrency)\n    // console.log(e.target.value)\n  }\n\n  render() {\n    // const { datas, categories } = this.state;\n\n    const { datas, categories, currencies } = this.state;\n\n    const currencyChoice = currencies.map(currency =>\n      <option key={currency} value={currency}> {currency} </option>      \n    );\n    return (\n      <GlobalProvider>\n        <div className=\"container\">\n          <div className=\"left_container\">\n          <Balance />\n          <Chart />\n          <IncomeExpenses />\n          <button className='back-btn' onClick={this.showDrawer} type=\"primary\">Add Transcation</button>\n          <Drawer\n            title=\"Add a new transcation\"\n            width={520}\n            onClose={this.onClose}\n            visible={this.state.visible}\n            bodyStyle={{ paddingBottom: 80 }}\n            footer={\n              <div\n                style={{\n                  textAlign: 'right',\n                }}\n              >\n                <button className='additem-btn' type=\"primary\" onClick={this.onClose} style={{ marginRight: 8 }}>Cancel</button>\n                <button className='additem-btn' onClick={() => {this.addItems();}} type=\"primary\">Add Item</button>\n              </div>\n            }\n          >\n            <Form layout=\"vertical\" hideRequiredMark>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"dateTime\"\n                    label=\"DateTime\"\n                    rules={[{ required: true, message: 'Please choose the dateTime' }]}\n                  >\n                    <DatePicker className='date-input' \n                      size=\"large\" \n                      style={{ width: '100%' }}\n                      onChange={this.onChange} \n                      onOk={onOk} \n                    />\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"category\"\n                    label=\"Category\"\n                    rules={[{ required: true, message: 'Please enter the category' }]}\n                  >\n                    <AutoComplete\n                        dataSource={categories}\n                        onChange={this.onChange_inputauto}\n                        onSearch={this.onSelect_inputauto}\n                        children={\n                          <Input \n                            placeholder=\"Enter catagory...\" \n                            type=\"text\"\n                          />\n                        }\n                    />\n                  </Form.Item>\n                </Col>\n              </Row>\n              <Row gutter={16}>\n                <Col span={24}>\n                  <Form.Item\n                    name=\"amount\"\n                    label=\"Amount\"\n                    rules={[{ required: true, message: 'Please enter the amount' }]}\n                  >\n                    <input \n                      type=\"number\"\n                      placeholder=\"Enter Amount...\" \n                      value={datas.amount} \n                      onChange={e => this.setState({ datas: { ...datas, amount: e.target.value}})}\n                    />\n                  </Form.Item>\n                </Col>\n              </Row>\n            </Form>\n          </Drawer>\n          </div>\n\n          <div className=\"right_container\">\n            \n            <TransactionList />\n          </div>\n          \n          \n          \n          \n        </div>\n      </GlobalProvider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}